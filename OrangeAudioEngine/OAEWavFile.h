#pragma once

//////////////////////////////////////////////////////////////////////////
/// Includes
//////////////////////////////////////////////////////////////////////////

#include <OAEFile.h>


//////////////////////////////////////////////////////////////////////////
/// COAEWavFile
//////////////////////////////////////////////////////////////////////////

class COAEWavFile : public IOAEFile
{
public:

    //////////////////////////////////////////////////////////////////////////

    COAEWavFile( const OASourceId& anId, const std::string& aFilePath );
    ~COAEWavFile();

    //////////////////////////////////////////////////////////////////////////

    bool    Open() override;
    void    Close() override;

    bool    LoadWaveFormat() override;
    bool    LoadData() override;


private:

    //////////////////////////////////////////////////////////////////////////

    bool LocateChunk( const OAUInt32 aRiffChunkType, OAUInt32& aChunkSize, OAUInt32& aChunkPosition );
    bool ReadChunk( void* aBuffer, OAUInt32 aBufferSize, OAUInt32 aBufferOffset );
    void InitializeXAudioBuffer( OAUInt32 aDataSize );
};


//////////////////////////////////////////////////////////////////////////